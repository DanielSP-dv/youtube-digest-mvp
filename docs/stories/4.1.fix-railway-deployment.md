# Story 4.1: Fix Frontend Deployment on Railway

## Status: In Progress

## Story
**As a** developer,
**I want** the React frontend to be correctly built and served during Railway deployment,
**so that** the live application is fully functional and accessible to users.

## Problem
The Railway deployment process is only running the backend server (`npm start`) and is not building the React client application. This results in the backend running correctly, but there is no frontend to serve, leading to a non-functional live deployment. The `/client/build` directory is missing on the server.

## Acceptance Criteria:
1. The Railway deployment process must execute the client-side build step (`cd client && npm run build`).
2. The `server.js` file must be configured to serve the static files from the `client/build` directory in a production environment.
3. The `server.js` file must include a catch-all route (`*`) to serve `index.html` for client-side routing to work correctly.
4. After deployment, the live application URL must load the React frontend and be fully interactive.
5. The `REACT_APP_API_URL` environment variable must be correctly configured in the Railway environment to point to the production backend URL.

## Tasks / Subtasks

- [ ] **Task 1: Update `server.js` to Serve Static Frontend** (AC: 2, 3)
    - [ ] Add logic to `server.js` to statically serve the `client/build` directory when `NODE_ENV` is `production`.
    - [ ] Add a catch-all GET route (`app.get('*', ...)`) to the end of `server.js` that serves the `index.html` file for all non-API requests.

- [ ] **Task 2: Fix `nixpacks.toml` for Client Build** (AC: 1)
    - [ ] Update the `nixpacks.toml` file to include the client-side dependency installation and build command in the appropriate phases.

- [ ] **Task 3: Document and Verify Environment Variables** (AC: 5)
    - [ ] Add a note to this story reminding the user to set `REACT_APP_API_URL` in the Railway dashboard.

- [ ] **Task 4: Deploy and Verify** (AC: 4)
    - [ ] Commit and push changes.
    - [ ] Trigger a new deployment on Railway.
    - [ ] Verify the live URL loads the application.

## Dev Notes
*   This story directly addresses a critical deployment bug preventing the frontend from being served.
*   The recommended fix is to make the Nixpacks configuration explicit about the monorepo-like structure (root server, client app).
*   **User Action Required**: The `REACT_APP_API_URL` environment variable must be set manually in the Railway project settings before deploying. It should be set to the public Railway domain (e.g., `https://your-app-name.up.railway.app`).
