# Story 8.1: Migrate Client from Create React App to Vite

## Status: In Progress

## Story
**As a** developer,
**I want** to migrate the client application from Create React App (CRA) to Vite,
**so that** we have a reliable, modern, and fast build process that enables successful deployments.

## Problem
The existing `react-scripts` build process is failing silently on the Railway deployment environment, preventing the application from being deployed. Debugging efforts have been unsuccessful, indicating a fundamental issue with the outdated toolchain.

## Acceptance Criteria:
1. The `react-scripts` dependency must be removed from `client/package.json`.
2. `vite` and `@vitejs/plugin-react` must be added as development dependencies.
3. A `vite.config.js` file must be created in the `client/` directory.
4. The `public/index.html` file must be moved to `client/index.html` and its script tag updated.
5. The scripts in `client/package.json` must be updated to use `vite` for `dev`, `build`, and a new `preview` command.
6. The application must run locally using the new `vite` dev server.
7. The application must build successfully using `vite build`.

## Tasks / Subtasks

- [ ] **Task 1: Update Dependencies** (AC: 1, 2)
    - [ ] In `client/package.json`, remove `react-scripts`.
    - [ ] Add `vite` and `@vitejs/plugin-react` to `devDependencies`.

- [ ] **Task 2: Create Vite Configuration** (AC: 3)
    - [ ] Create a new file `client/vite.config.js`.
    - [ ] Configure the react plugin and the dev server proxy to point to the backend on port 5001.

- [ ] **Task 3: Relocate and Update `index.html`** (AC: 4)
    - [ ] Move `public/index.html` to `client/index.html`.
    - [ ] Update the script tag from `%PUBLIC_URL%/index.js` to `<script type="module" src="/src/index.js"></script>`.

- [ ] **Task 4: Update Package Scripts** (AC: 5)
    - [ ] In `client/package.json`, replace the `start`, `build`, and `test` scripts with `vite`, `vite build`, and `vitest` respectively.
    - [ ] Add a `preview` script for `vite preview`.

- [ ] **Task 5: Update Environment Variable Handling**
    - [ ] In any files using `process.env.REACT_APP_*`, replace it with `import.meta.env.VITE_*`.

## Dev Notes
*   This is a structural migration to a modern build tool to resolve persistent deployment failures.
*   This change will significantly improve build times and developer experience.
*   The `nixpacks.toml` file will need to be updated in a future step to call the new build commands.
