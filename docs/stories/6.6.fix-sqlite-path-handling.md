# Story 6.6: Fix SQLite Path Handling for Production

## Status: In Progress

## Story
**As a** developer,
**I want** the database connection logic to correctly parse the `DATABASE_URL`,
**so that** the application can open the SQLite file in a writable directory on Railway.

## Problem
The application is still crashing with `SQLITE_CANTOPEN`. The root cause is likely that the `sqlite3` library cannot handle the `file:` prefix in the `DATABASE_URL` environment variable, and expects a raw filesystem path instead.

## Acceptance Criteria:
1. `db.js` is updated to safely parse the `DATABASE_URL`, removing the `file:` prefix if it is present.
2. `db.js` logs the final, parsed database path to the console for debugging purposes.
3. When deployed, the application successfully connects to the SQLite database without crashing.

## Tasks / Subtasks

- [ ] **Task 1: Implement Robust Path Parsing in `db.js`** (AC: 1, 2)
    - [ ] Modify `db.js` to check if `process.env.DATABASE_URL` starts with `file:` and, if so, strip it.
    - [ ] Add a `console.log` to show the final `dbPath` being used by the `sqlite3` constructor.

- [ ] **Task 2: Deploy and Verify** (AC: 3)
    - [ ] User to redeploy the application with the fix.
    - [ ] Check Railway logs to confirm the `SQLITE_CANTOPEN` error is gone and the server is running.

## Dev Notes
*   This hotfix addresses a subtle incompatibility between the format of the `DATABASE_URL` provided by some services and the expectations of the `node-sqlite3` library.
